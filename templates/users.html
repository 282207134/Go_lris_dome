{{define "content"}}
<h2>用户列表</h2>

{{if .error}}
<div class="alert alert-error">
    {{.error}}
</div>
{{end}}

{{if .users}}
<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>用户名</th>
            <th>邮箱</th>
            <th>姓名</th>
            <th>角色</th>
            <th>状态</th>
            <th>注册时间</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        {{range .users}}
        <tr>
            <td>{{.ID}}</td>
            <td>{{.Username}}</td>
            <td>{{.Email}}</td>
            <td>{{.FirstName}} {{.LastName}}</td>
            <td>
                {{if eq .Role "admin"}}
                    <span style="color: #dc3545;">管理员</span>
                {{else}}
                    <span style="color: #28a745;">普通用户</span>
                {{end}}
            </td>
            <td>
                {{if eq .Status "active"}}
                    <span style="color: #28a745;">激活</span>
                {{else}}
                    <span style="color: #6c757d;">禁用</span>
                {{end}}
            </td>
            <td>{{.CreatedAt.Format "2006-01-02 15:04:05"}}</td>
            <td>
                <a href="/pages/user/{{.ID}}" class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.875rem;">查看</a>
            </td>
        </tr>
        {{end}}
    </tbody>
</table>
{{else}}
<div class="alert alert-info">
    暂无用户数据
</div>
{{end}}

<div class="mt-4">
    <h3>API 调用示例</h3>
    <div class="code-block">
        <pre># 获取用户列表（需要认证）
curl -X GET "http://localhost:8080/api/users" \
  -H "Authorization: Bearer &lt;your-jwt-token&gt;"

# 获取单个用户
curl -X GET "http://localhost:8080/api/users/1" \
  -H "Authorization: Bearer &lt;your-jwt-token&gt;"

# 创建用户
curl -X POST "http://localhost:8080/api/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "newuser",
    "email": "newuser@example.com",
    "password": "password123",
    "first_name": "张",
    "last_name": "三"
  }'

# 用户登录
curl -X POST "http://localhost:8080/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'</pre>
    </div>
</div>

<div class="mt-4 text-center">
    <a href="/" class="btn btn-secondary">返回首页</a>
    <a href="/api/docs" class="btn" style="margin-left: 1rem;">API 文档</a>
</div>
{{end}}